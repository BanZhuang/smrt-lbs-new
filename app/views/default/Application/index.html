#{set 'title'}&{'application-title-long'} - &{'live-location'}#{/set}
#{set voucher_mode:false /}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>#{get 'title' /}</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" media="screen" href="${static_dir}/css/website.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="${static_dir}/css/alertStyle.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="${static_dir}/${theme}/css/${theme}.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="${static_dir}/css/modal_window.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="${static_dir}/${theme}/css/modal_window.css" />
        #{get 'moreStyles' /}
        <link rel="shortcut icon" type="image/png" href="${static_dir}/${theme}/images/favicon.png">
        <script type="text/javascript">
            var base='${static_dir}';
            var theme='${theme}';
            var apibase='${apibase}';
            var language='${language}';
            
        </script>
        
        
        <script src="${static_dir}/js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/templating.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/jquery.scrollTo-min.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/date.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/menu.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/json2.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/definition.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/common.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/jquery.jqote2.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/jquery.pagination.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/modal_window.js" type="text/javascript" charset="utf-8"></script>
        <script src="${static_dir}/js/form.js" type="text/javascript"></script>
        <script src="${static_dir}/js/user.js" type="text/javascript"></script>
        <script src="${static_dir}/js/jquery.validate.min.js" type="text/javascript"></script>
        <script src="${static_dir}/js/kendo.web.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            sessionid='${sessionid}';
        </script>
        <script type="text/javascript">
            setupModal();

            $(function() {
                $(".edit-change-password-btn").click(function(){
                    $(".edit-change-password").slideToggle("slow");
                });
                $(".edit-reset-password-btn").click(function(){
                    $(".edit-reset-password").slideToggle("slow");
                });
                $("#user-role").change(function() {
                    setAccountRow();
                });
            });
        </script>
		<script src="/public/js/kendo.web.min.js"></script>
		<script src="/public/js/console.js"></script>
		<link href="/public/css/kendo.common.min.css" rel="stylesheet" />
		<link href="/public/css/kendo.default.min.css" rel="stylesheet" />
		
		<script src="/public/js/onemap.sg-local.js" language="javascript"></script>
		<script src="/public/js/Ext.util.DelayedTask-nsRemoved.js" type="text/javascript"></script>
		
		
		<script src="/public/js/_Contained.xd.js" type="text/javascript"></script>
		<script src="/public/js/curry.xd.js" type="text/javascript"></script>
		<script src="/public/js/fold.xd.js" type="text/javascript"></script>
		<script src="/public/js/lambda.xd.js" type="text/javascript"></script>
		<script src="/public/js/object.xd.js" type="text/javascript"></script>
		<script src="/public/js/excaliburUtils.js" type="text/javascript"></script>
		<script src="/public/js/bonfire-injected.js" type="text/javascript"></script>
		<script src="/public/js/ContentPane.xd.js" type="text/javascript"></script>
		<script src="/public/js/_ContentPaneResizeMixin.xd.js" type="text/javascript"></script>
		<script src="/public/js/_LayoutWidget.xd.js" type="text/javascript"></script>
		<script src="/public/js/cookie.xd.js" type="text/javascript"></script>
		<script src="/public/js/html.xd.js" type="text/javascript"></script>
		<script src="/public/js/svg.xd.js" type="text/javascript"></script>
		
		<script src="/public/js/esri.ux.layers.ClusterLayer-debug.js" type="text/javascript"></script>
		<script src="/public/js/array.xd.js" type="text/javascript"></script>
		
		<script>
	var map = "";
     $(document).ready(function() {
         $("#vertical").kendoSplitter({
             orientation: "vertical",
             panes: [
                 { collapsible: false },//bottom up
                 { collapsible: true, size: "250px" }//bottom down
             ],
             resize:function(e){
             	
             	//第一次加载时不需要resize
             	if (map && map != ""){
             		map.resize();
             		//alert(map);
      				map.reposition();
      			}
             }
         });

         $("#horizontal").kendoSplitter({
             panes: [
                 { collapsible: false},
                 { collapsible: true, size: "250px" },
             ],
             resize:function(e){
             	//第一次加载时不需要resize
             	if (map && map != ""){
             		map.resize();
      				map.reposition();
      			}
             }
         });
         
     });
 </script>
        #{get 'moreScripts' /}
        <style>
	html,body{
	    width: 100%;
	    height: 100%;
	    background-color: #efefef;
	}
	
	.header{
	    width: 100%;
	    height: 80px;
	    text-align: center;
	}
	
	.header-wrap{
	    width: 99%;
	    margin-left: auto;
	    margin-right: auto;
	    text-align: left;
	    height: 90px;
	}
	
	#map_content{
		width:100%;/*满屏显示*/  
		height:87%;
	    position:relative; /*相对定位*/  
	    padding-top:15px;
	    padding-bottom:15px;
	}
	#vertical {
		position:absolute;
		height: 97%;
		width: 99%;
		margin-left:8px;
	}
	#horizontal{
		height:100%;
		width:100%;
	}
	#middle-pane {
		background-color: rgba(60, 70, 80, 0.10);
	}
	#bottom-pane {
		background-color: rgba(60, 70, 80, 0.15);
	}
	#left-pane {
		background-color: rgba(60, 70, 80, 0.05);
	}
	#map {
		background-color: rgba(60, 70, 80, 0.05);
		overflow:hidden;
		position:absolute;
	}
	#right-pane {
		background-color: rgba(60, 70, 80, 0.05);
	}
	.pane-content {
		padding: 0;
		overflow:hidden;
	}
	</style>
        
    </head>
    <body class="claro">
        <div id="header" class="header background-image">
            <div class="header-wrap">
                <div class="logo background-image"></div>
                <div class="header-topright">
                    <div class="header-toolbar background-image">
                        <div class="header-toolbar-wrap">
                        	<a class="copy-text-white" href="/">Home</a>
                            <span class="copy-text-white">&nbsp;|&nbsp;</span>
                            <a class="copy-text-white" href="/admin">Admin</a>
                            <span class="copy-text-white">&nbsp;|&nbsp;</span>
                            <a class="copy-text-white" href="javascript:void(0)" onclick="logout()">&{'log-out'}</a>
                        </div>
                    </div>
                    <div class="afterlogin-welcome-wrap">
                        <span>&{'welcome'} ${user.name}!</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="map_content" >
           	<div id="vertical">
			     <div id="top-pane">
			         <div id="horizontal">
			             <div id="map" region="center" class="pane-content">
			                 	#{include './map.html' /}
			             </div>
			             <div id="right-pane">
			                 <div class="pane-content">
			                 	#{include './siderbar.html' /}
			                 </div>
			             </div>
			         </div>
			     </div>
			     <div id="bottom-pane">
			         <div class="pane-content">
			         	#{include './live_bus_grid.html' /}
			         </div>
			     </div>
 			</div>
        </div>
    </body>
</html>

